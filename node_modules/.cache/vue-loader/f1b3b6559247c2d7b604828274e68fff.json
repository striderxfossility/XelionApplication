{"remainingRequest":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jelle\\Desktop\\Xelion Plugin\\src\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jelle\\Desktop\\Xelion Plugin\\src\\Home.vue","mtime":1579080331999},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVUlraXQgZnJvbSAndWlraXQnDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnSG9tZScsDQoNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdXNlcjogbnVsbCwNCiAgICAgICAgICAgIGxpbmVzOiBbXSwNCiAgICAgICAgICAgIGNoYW5uZWxzOiBbXSwNCiAgICAgICAgICAgIGhpc3Rvcnk6IFtdDQogICAgICAgIH0NCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KICAgICAgICBOaWNlRGF0ZShkYXR1bSkgew0KICAgICAgICAgICAgdmFyIGZpcnN0ID0gZGF0dW0uc3BsaXQoIiAiKVswXQ0KICAgICAgICAgICAgdmFyIHRpamQgPSBkYXR1bS5zcGxpdCgiICIpWzFdLnNwbGl0KCI6IilbMF0gKyAiOiIgKyBkYXR1bS5zcGxpdCgiICIpWzFdLnNwbGl0KCI6IilbMV0NCg0KICAgICAgICAgICAgdmFyIHRoaXNEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCJUIilbMF0NCg0KICAgICAgICAgICAgaWYoZmlyc3QgPT0gdGhpc0RhdGUpDQogICAgICAgICAgICAgICAgcmV0dXJuICdWYW5kYWFnICcgKyB0aWpkDQoNCiAgICAgICAgICAgIHZhciBnaXN0ZXIgPSBuZXcgRGF0ZSgpDQogICAgICAgICAgICBnaXN0ZXIuc2V0RGF0ZShnaXN0ZXIuZ2V0RGF0ZSgpLTEpDQogICAgICAgICAgICBnaXN0ZXIgPSBnaXN0ZXIudG9JU09TdHJpbmcoKS5zcGxpdCgiVCIpWzBdDQoNCiAgICAgICAgICAgIGlmKGZpcnN0ID09IGdpc3RlcikNCiAgICAgICAgICAgICAgICByZXR1cm4gJ0dpc3RlciAnICsgdGlqZA0KDQogICAgICAgICAgICByZXR1cm4gZmlyc3QgKyAiICIgKyB0aWpkDQogICAgICAgIH0sDQogICAgICAgIE5pY2VTZWNvbmRzKHNlYykgew0KDQogICAgICAgICAgICBpZihzZWMgPCA2MCkNCiAgICAgICAgICAgICAgICByZXR1cm4gc2VjICsgJ3MnDQoNCiAgICAgICAgICAgIHZhciBtaW4gPSBzZWMgLyA2MDsNCiAgICAgICAgICAgIG1pbiA9IE1hdGguZmxvb3IobWluKQ0KDQogICAgICAgICAgICB2YXIgcmVtZW5pbmdTZWMgPSBzZWMgLSAobWluICogNjApDQoNCiAgICAgICAgICAgIHJldHVybiBtaW4gKyAnbScgKyByZW1lbmluZ1NlYw0KDQogICAgICAgIH0sDQogICAgICAgIHVwZGF0ZVN0YXR1cygpIHsNCiAgICAgICAgICAgIGF4aW9zLnB1dCh0aGlzLiRjb29raWUuZ2V0KCJiYXNlVXJsIikgKyAnL21lL21lc3NhZ2UnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXIucHJlc2VuY2VJbmZvLm1lc3NhZ2UpKS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgYXhpb3MucHV0KHRoaXMuJGNvb2tpZS5nZXQoImJhc2VVcmwiKSArICcvbWUvc3RhdHVzJywgdGhpcy51c2VyLnByZXNlbmNlSW5mby5zdGF0dXMpDQogICAgICAgIH0sDQogICAgICAgIHJlZnJlc2hDaGFubmVsKCkgew0KICAgICAgICAgICAgdmFyIGEgPSBheGlvcw0KICAgICAgICAgICAgdmFyIGJhc2UgPSB0aGlzLiRjb29raWUuZ2V0KCJiYXNlVXJsIikNCiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkgeyANCiAgICAgICAgICAgICAgICBhLmdldChiYXNlICsgJy9jaGFubmVscycpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5uZWxzID0gW10NCg0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5uZWxzID0gcmVzcG9uc2UuZGF0YS5kYXRhDQoNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5kYXRhKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9LCAzMDAwKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBtb3VudGVkKCkgew0KICAgICAgICBVSWtpdC5ub3RpZmljYXRpb24oJ1N1Y2Nlc3ZvbCBpbmdlbG9nZCcsIHtzdGF0dXM6ICdzdWNjZXNzJ30pDQoNCiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICd4ZWxpb24gJyArIHRoaXMuJGNvb2tpZS5nZXQoImF1dGhlbnRpY2F0aW9uIikNCiAgICAgICAgDQogICAgICAgIGF4aW9zLmdldCh0aGlzLiRjb29raWUuZ2V0KCJiYXNlVXJsIikgKyAiL21lL2luZm8iKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIHRoaXMudXNlciA9IHJlc3BvbnNlLmRhdGEub2JqZWN0DQoNCiAgICAgICAgICAgIGF4aW9zLmdldCh0aGlzLiRjb29raWUuZ2V0KCJiYXNlVXJsIikgKyAiL2NvbW11bmljYXRpb25zL3JlY2VudCIpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeSA9IHJlc3BvbnNlLmRhdGEuZGF0YQ0KDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhpc3RvcnkubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSB0aGlzLmhpc3RvcnlbaV0ub2JqZWN0LmFkZHJlc3NhYmxlLmljb25JZA0KDQogICAgICAgICAgICAgICAgICAgIGlmKGljb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLmdldCh0aGlzLiRjb29raWUuZ2V0KCJiYXNlVXJsIikgKyAiL2F0dGFjaG1lbnRzLyIgKyBpY29uKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnlbaV0uYXR0YWNobWVudCA9IHJlc3BvbnNlLmRhdGEub2JqZWN0DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpDQogICAgICAgIH0pDQogICAgfQ0KfQ0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src","sourcesContent":["<template>\r\n    <div>\r\n        <nav class=\"uk-navbar uk-navbar-container uk-margin\" style=\"margin-bottom: 0px;\">\r\n            <div class=\"uk-navbar-left\">\r\n                <a class=\"uk-navbar-toggle\" uk-toggle=\"target: #offcanvas-push\" href=\"#\">\r\n                    <span uk-navbar-toggle-icon></span> <span class=\"uk-margin-small-left\">Menu</span>\r\n                </a>\r\n            </div>\r\n        </nav>\r\n\r\n        <div id=\"modal-user\" uk-modal>\r\n            <div class=\"uk-modal-dialog uk-modal-body\">\r\n                <h2 class=\"uk-modal-title\">Status</h2>\r\n                \r\n                 <div class=\"uk-margin\" v-if=\"user\">\r\n                    <select class=\"uk-select\" v-model=\"user.presenceInfo.status\">\r\n                        <option value=\"online\">Inlogstatus</option>\r\n                        <option value=\"available\">Beschikbaar</option>\r\n                        <option value=\"unavailable\">Niet beschikbaar</option>\r\n                        <option value=\"dont_disturb\">Niet storen</option>\r\n                        <option value=\"at_appointment\">Afspraak</option>\r\n                        <option value=\"short_out_of_office\">Kort afwezig</option>\r\n                        <option value=\"long_out_of_office\">Lang afwezig</option>\r\n                    </select>\r\n                </div>\r\n\r\n                 <div class=\"uk-margin\" v-if=\"user\">\r\n                    <input class=\"uk-input\" type=\"text\" v-model=\"user.presenceInfo.message\" placeholder=\"Status\">\r\n                </div>\r\n\r\n                <p class=\"uk-text-right\">\r\n                    <button class=\"uk-button uk-button-default uk-modal-close\" type=\"button\">Cancel</button>\r\n                    <button class=\"uk-button uk-button-primary uk-modal-close\" v-on:click=\"updateStatus\" type=\"button\">Update</button>\r\n                </p>\r\n            </div>\r\n        </div>\r\n\r\n        <div id=\"offcanvas-push\" uk-offcanvas=\"mode: push; overlay: true\">\r\n            <div class=\"uk-offcanvas-bar\">\r\n\r\n                <div class=\"uk-card-header\" uk-toggle=\"target: #modal-user\" style=\"cursor:pointer\">\r\n                    <div class=\"uk-grid-small uk-flex-middle\" uk-grid v-if=\"user\">\r\n                        <div class=\"uk-width-auto\">\r\n                            <div uk-tooltip=\"Beschikbaar\" v-if=\"user.presenceInfo.status == 'available'\" class=\"roundedIcon\" style=\"background-color:green;\"></div>\r\n                            <div uk-tooltip=\"Niet beschikbaar\" v-if=\"user.presenceInfo.status == 'unavailable'\" class=\"roundedIcon\" style=\"background-color:red;\"></div>\r\n                            <div uk-tooltip=\"Online\" v-if=\"user.presenceInfo.status == 'online'\" class=\"roundedIcon\" style=\"background-color:green;\"></div>\r\n                            <div uk-tooltip=\"Niet storen\" v-if=\"user.presenceInfo.status == 'dont_disturb'\" class=\"roundedIcon\" style=\"background-color:darkred;\"></div>\r\n                            <div uk-tooltip=\"Afspraak\" v-if=\"user.presenceInfo.status == 'at_appointment'\" class=\"roundedIcon\" style=\"background-color:white;\"></div>\r\n                            <div uk-tooltip=\"Kort afwezig\" v-if=\"user.presenceInfo.status == 'short_out_of_office'\" class=\"roundedIcon\" style=\"background-color:yellow;\"></div>\r\n                            <div uk-tooltip=\"Lang afwezig\" v-if=\"user.presenceInfo.status == 'long_out_of_office'\" class=\"roundedIcon\" style=\"background-color:orange;\"></div>\r\n                        </div>\r\n                        <div class=\"uk-width-expand\">\r\n                            <h3 class=\"uk-card-title uk-margin-remove-bottom\">{{ user.person.commonName }}</h3>\r\n                            <p class=\"uk-text-meta uk-margin-remove-top\"><time datetime=\"2016-04-01T19:00\">{{ user.presenceInfo.message }}</time></p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <h3>Title</h3>\r\n\r\n                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"uk-grid\">\r\n            <div class=\"uk-width-1-3\" style=\"background:#fafafa;\">\r\n                <div class=\"uk-card-header\" style=\"border-bottom: 1px solid #999999;\" v-for=\"(histor, i) in history\" :key=\"'histor-' + i\">\r\n                    <div class=\"uk-grid-small uk-flex-middle\" uk-grid>\r\n                        <div class=\"uk-width-auto\">\r\n                            <img v-if=\"histor.attachment\" class=\"uk-border-circle\" width=\"40\" height=\"40\" :src=\"'data:image/jpeg;base64,' + histor.attachment.contentsB64String\">\r\n                            <img v-if=\"!histor.attachment\" width=\"40\" height=\"40\" />\r\n                        </div>\r\n                        <div class=\"uk-width-expand\">\r\n                            <h3 class=\"uk-card-title uk-margin-remove-bottom\">\r\n                                <span v-if=\"histor.object.lastCommunication.status == 'Answer'\"><i style=\"color:green;\" class=\"fas fa-phone\"></i></span>\r\n                                <span v-if=\"histor.object.lastCommunication.status == 'Unavailable'\"><i style=\"color:red;\" class=\"fas fa-phone-slash\"></i></span>\r\n                                {{ histor.object.addressable.commonName }}\r\n                                <span v-if=\"histor.object.lastCommunication.voicemail == true\"><i style=\"color:#8383ff;\" class=\"fas fa-voicemail\"></i></span>\r\n                            </h3>\r\n                            <p class=\"uk-text-meta uk-margin-remove-top\">\r\n                                <time datetime=\"2016-04-01T19:00\">\r\n                                    {{ NiceDate(histor.object.lastCommunication.date) }}<br />\r\n                                    <span style=\"font-weight:bold;\">Duur {{ NiceSeconds(histor.object.lastCommunication.durationSec) }}</span>\r\n                                </time>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"uk-width-1-3\">\r\n                <div v-for=\"channel in channels\" :key=\"channel.object.channelId\">\r\n                    {{ channel.object.phoneNumber }} is aan het bellen!\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport UIkit from 'uikit'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    name: 'Home',\r\n\r\n    data() {\r\n        return {\r\n            user: null,\r\n            lines: [],\r\n            channels: [],\r\n            history: []\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        NiceDate(datum) {\r\n            var first = datum.split(\" \")[0]\r\n            var tijd = datum.split(\" \")[1].split(\":\")[0] + \":\" + datum.split(\" \")[1].split(\":\")[1]\r\n\r\n            var thisDate = new Date().toISOString().split(\"T\")[0]\r\n\r\n            if(first == thisDate)\r\n                return 'Vandaag ' + tijd\r\n\r\n            var gister = new Date()\r\n            gister.setDate(gister.getDate()-1)\r\n            gister = gister.toISOString().split(\"T\")[0]\r\n\r\n            if(first == gister)\r\n                return 'Gister ' + tijd\r\n\r\n            return first + \" \" + tijd\r\n        },\r\n        NiceSeconds(sec) {\r\n\r\n            if(sec < 60)\r\n                return sec + 's'\r\n\r\n            var min = sec / 60;\r\n            min = Math.floor(min)\r\n\r\n            var remeningSec = sec - (min * 60)\r\n\r\n            return min + 'm' + remeningSec\r\n\r\n        },\r\n        updateStatus() {\r\n            axios.put(this.$cookie.get(\"baseUrl\") + '/me/message', JSON.stringify(this.user.presenceInfo.message)).catch(error => {\r\n                console.log(error.response)\r\n            })\r\n            axios.put(this.$cookie.get(\"baseUrl\") + '/me/status', this.user.presenceInfo.status)\r\n        },\r\n        refreshChannel() {\r\n            var a = axios\r\n            var base = this.$cookie.get(\"baseUrl\")\r\n            setInterval(function() { \r\n                a.get(base + '/channels').then(response => {\r\n                    this.channels = []\r\n\r\n                    this.channels = response.data.data\r\n\r\n                    console.log(response.data.data)\r\n                })\r\n            }, 3000);\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        UIkit.notification('Succesvol ingelogd', {status: 'success'})\r\n\r\n        axios.defaults.headers.common['Authorization'] = 'xelion ' + this.$cookie.get(\"authentication\")\r\n        \r\n        axios.get(this.$cookie.get(\"baseUrl\") + \"/me/info\").then(response => {\r\n            this.user = response.data.object\r\n\r\n            axios.get(this.$cookie.get(\"baseUrl\") + \"/communications/recent\").then(response => {\r\n                this.history = response.data.data\r\n\r\n                for (let i = 0; i < this.history.length; i++) {\r\n                    var icon = this.history[i].object.addressable.iconId\r\n\r\n                    if(icon) {\r\n                        axios.get(this.$cookie.get(\"baseUrl\") + \"/attachments/\" + icon).then(response => {\r\n                            this.history[i].attachment = response.data.object\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }).catch(error => {\r\n            console.log(error.response)\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .roundedIcon {\r\n        width:30px;\r\n        height:30px;\r\n        border-radius: 50%;\r\n    }\r\n</style>"]}]}