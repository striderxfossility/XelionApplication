{"remainingRequest":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jelle\\Desktop\\Xelion Plugin\\src\\Home.vue?vue&type=style&index=0&id=2380d2d8&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\jelle\\Desktop\\Xelion Plugin\\src\\Home.vue","mtime":1579102568876},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jelle\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yb3VuZGVkSWNvbiB7CiAgICB3aWR0aDozMHB4OwogICAgaGVpZ2h0OjMwcHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KCi5oaXN0b3I6aG92ZXIgewogICAgYmFja2dyb3VuZDogI2U4ZTdlNzsKfQoKLnNpZGViYXIgewogICAgb3ZlcmZsb3cteTogc2Nyb2xsOwp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0PA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"Home.vue","sourceRoot":"src","sourcesContent":["<template>\r\n    <div>\r\n        <nav class=\"uk-navbar uk-navbar-container uk-margin\" style=\"margin-bottom: 0px;\">\r\n            <div class=\"uk-navbar-left\">\r\n                <a class=\"uk-navbar-toggle\" uk-toggle=\"target: #offcanvas-push\" href=\"#\">\r\n                    <span uk-navbar-toggle-icon></span> <span class=\"uk-margin-small-left\">Menu</span>\r\n                </a>\r\n            </div>\r\n        </nav>\r\n\r\n        <div id=\"modal-user\" uk-modal>\r\n            <div class=\"uk-modal-dialog uk-modal-body\">\r\n                <h2 class=\"uk-modal-title\">Status</h2>\r\n                \r\n                 <div class=\"uk-margin\" v-if=\"user\">\r\n                    <select class=\"uk-select\" v-model=\"user.presenceInfo.status\">\r\n                        <option value=\"online\">Inlogstatus</option>\r\n                        <option value=\"available\">Beschikbaar</option>\r\n                        <option value=\"unavailable\">Niet beschikbaar</option>\r\n                        <option value=\"dont_disturb\">Niet storen</option>\r\n                        <option value=\"at_appointment\">Afspraak</option>\r\n                        <option value=\"short_out_of_office\">Kort afwezig</option>\r\n                        <option value=\"long_out_of_office\">Lang afwezig</option>\r\n                    </select>\r\n                </div>\r\n\r\n                 <div class=\"uk-margin\" v-if=\"user\">\r\n                    <input class=\"uk-input\" type=\"text\" v-model=\"user.presenceInfo.message\" placeholder=\"Status\">\r\n                </div>\r\n\r\n                <p class=\"uk-text-right\">\r\n                    <button class=\"uk-button uk-button-default uk-modal-close\" type=\"button\">Cancel</button>\r\n                    <button class=\"uk-button uk-button-primary uk-modal-close\" v-on:click=\"updateStatus\" type=\"button\">Update</button>\r\n                </p>\r\n            </div>\r\n        </div>\r\n\r\n        <div id=\"offcanvas-push\" uk-offcanvas=\"mode: push; overlay: true\">\r\n            <div class=\"uk-offcanvas-bar\">\r\n\r\n                <div class=\"uk-card-header\" uk-toggle=\"target: #modal-user\" style=\"cursor:pointer\">\r\n                    <div class=\"uk-grid-small uk-flex-middle\" uk-grid v-if=\"user\">\r\n                        <div class=\"uk-width-auto\">\r\n                            <div uk-tooltip=\"Beschikbaar\" v-if=\"user.presenceInfo.status == 'available'\" class=\"roundedIcon\" style=\"background-color:green;\"></div>\r\n                            <div uk-tooltip=\"Niet beschikbaar\" v-if=\"user.presenceInfo.status == 'unavailable'\" class=\"roundedIcon\" style=\"background-color:red;\"></div>\r\n                            <div uk-tooltip=\"Online\" v-if=\"user.presenceInfo.status == 'online'\" class=\"roundedIcon\" style=\"background-color:green;\"></div>\r\n                            <div uk-tooltip=\"Niet storen\" v-if=\"user.presenceInfo.status == 'dont_disturb'\" class=\"roundedIcon\" style=\"background-color:darkred;\"></div>\r\n                            <div uk-tooltip=\"Afspraak\" v-if=\"user.presenceInfo.status == 'at_appointment'\" class=\"roundedIcon\" style=\"background-color:white;\"></div>\r\n                            <div uk-tooltip=\"Kort afwezig\" v-if=\"user.presenceInfo.status == 'short_out_of_office'\" class=\"roundedIcon\" style=\"background-color:yellow;\"></div>\r\n                            <div uk-tooltip=\"Lang afwezig\" v-if=\"user.presenceInfo.status == 'long_out_of_office'\" class=\"roundedIcon\" style=\"background-color:orange;\"></div>\r\n                        </div>\r\n                        <div class=\"uk-width-expand\">\r\n                            <h3 class=\"uk-card-title uk-margin-remove-bottom\">{{ user.person.commonName }}</h3>\r\n                            <p class=\"uk-text-meta uk-margin-remove-top\"><time datetime=\"2016-04-01T19:00\">{{ user.presenceInfo.message }}</time></p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <h3>Title</h3>\r\n\r\n                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"uk-grid\">\r\n            <div class=\"uk-width-1-4 sidebar\" :style=\"'background:#fafafa; height:'+getWindowHeight()+'px;'\">\r\n                <div class=\"uk-card-header histor\" style=\"cursor:pointer; border-bottom: 1px solid #999999;\" v-for=\"(histor, i) in historyList\" :key=\"'histor-' + i\">\r\n                    <div v-on:click=\"openContact(histor)\" class=\"uk-grid-small uk-flex-middle\" uk-grid v-if=\"histor\">\r\n                        <div class=\"uk-width-auto\">\r\n                            <img v-if=\"histor.attachment\" class=\"uk-border-circle\" width=\"40\" height=\"40\" :src=\"'data:image/jpeg;base64,' + histor.attachment.contentsB64String\">\r\n                            <img v-if=\"!histor.attachment\" width=\"40\" height=\"40\" />\r\n                        </div>\r\n                        <div class=\"uk-width-expand\">\r\n                            <h5 style=\"font-size: 16px;\" class=\"uk-card-title uk-margin-remove-bottom\">\r\n                                <span v-if=\"histor.object.lastCommunication.status == 'Answer'\"><i style=\"color:green;\" class=\"fas fa-phone\"></i></span>\r\n                                <span v-if=\"histor.object.lastCommunication.status == 'Unavailable' || histor.object.lastCommunication.status == 'Cancel'\"><i style=\"color:red;\" class=\"fas fa-phone-slash\"></i></span>\r\n                                \r\n                                <span v-if=\"histor.object.addressable\">\r\n                                    {{ histor.object.addressable.commonName }}\r\n                                </span>\r\n\r\n                                <span v-if=\"!histor.object.addressable\">\r\n                                    Onbekend\r\n                                </span>\r\n                                \r\n                                <span v-if=\"histor.object.lastCommunication.voicemail == true\"><i style=\"color:#8383ff;\" class=\"fas fa-voicemail\"></i></span>\r\n                            </h5>\r\n                            <p class=\"uk-text-meta uk-margin-remove-top\">\r\n                                <time datetime=\"2016-04-01T19:00\">\r\n                                    {{ NiceDate(histor.object.lastCommunication.date) }}<br />\r\n                                    <span style=\"font-weight:bold;\">Duur {{ NiceSeconds(histor.object.lastCommunication.durationSec) }}</span>\r\n                                </time>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if=\"activeTemplate == 'Contact'\" class=\"uk-width-3-4\">\r\n                <Contact :oid=\"templateParameter\" ></Contact>\r\n            </div>\r\n\r\n            <div class=\"uk-width-1-3\">\r\n                <div v-for=\"channel in channels\" :key=\"channel.object.channelId\">\r\n                    {{ channel.object.phoneNumber }} is aan het bellen!\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Contact from './Contact.vue'\r\nimport UIkit from 'uikit'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    name: 'Home',\r\n\r\n    data() {\r\n        return {\r\n            user: null,\r\n            lines: [],\r\n            channels: [],\r\n            history: [],\r\n            activeTemplate: '',\r\n            templateParameter: 0\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        historyList() {\r\n            return this.history\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        getWindowHeight() {\r\n            return window.innerHeight - 80\r\n        },\r\n        openContact(histor) {\r\n            if(histor.object.addressable) {\r\n                this.activeTemplate = 'Contact'\r\n                this.templateParameter = histor.object.addressable.oid\r\n            }\r\n        },\r\n        pushHistory (i, data) {\r\n            this.history[i] = data\r\n            this.$forceUpdate();\r\n        },\r\n        NiceDate(datum) {\r\n            var first = datum.split(\" \")[0]\r\n            var tijd = datum.split(\" \")[1].split(\":\")[0] + \":\" + datum.split(\" \")[1].split(\":\")[1]\r\n\r\n            var thisDate = new Date().toISOString().split(\"T\")[0]\r\n\r\n            if(first == thisDate)\r\n                return 'Vandaag ' + tijd\r\n\r\n            var gister = new Date()\r\n            gister.setDate(gister.getDate()-1)\r\n            gister = gister.toISOString().split(\"T\")[0]\r\n\r\n            if(first == gister)\r\n                return 'Gister ' + tijd\r\n\r\n            return first + \" \" + tijd\r\n        },\r\n        NiceSeconds(sec) {\r\n\r\n            if(sec < 60)\r\n                return sec + 's'\r\n\r\n            var min = sec / 60;\r\n            min = Math.floor(min)\r\n\r\n            var remeningSec = sec - (min * 60)\r\n\r\n            return min + 'm' + remeningSec\r\n\r\n        },\r\n        updateStatus() {\r\n            axios.put(this.$cookie.get(\"baseUrl\") + '/me/message', JSON.stringify(this.user.presenceInfo.message)).catch(error => {\r\n                console.log(error.response)\r\n            })\r\n            axios.put(this.$cookie.get(\"baseUrl\") + '/me/status', this.user.presenceInfo.status)\r\n        },\r\n        refreshChannel() {\r\n            var a = axios\r\n            var base = this.$cookie.get(\"baseUrl\")\r\n            setInterval(function() { \r\n                a.get(base + '/channels').then(response => {\r\n                    this.channels = []\r\n\r\n                    this.channels = response.data.data\r\n\r\n                    console.log(response.data.data)\r\n                })\r\n            }, 3000);\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        UIkit.notification('Succesvol ingelogd', {status: 'success'})\r\n\r\n        axios.defaults.headers.common['Authorization'] = 'xelion ' + this.$cookie.get(\"authentication\")\r\n        \r\n        axios.get(this.$cookie.get(\"baseUrl\") + \"/me/info\").then(response => {\r\n            this.user = response.data.object\r\n\r\n            axios.get(this.$cookie.get(\"baseUrl\") + \"/communications/recent\").then(response => {\r\n\r\n                var data = response.data.data\r\n\r\n                for (let i = 0; i < data.length; i++) \r\n                {\r\n\r\n                    data[i].attachment = null\r\n                    \r\n                    if(data[i].object.addressable) \r\n                    {\r\n                        var icon = data[i].object.addressable.iconId\r\n\r\n                        if(icon) {\r\n                            axios.get(this.$cookie.get(\"baseUrl\") + \"/attachments/\" + icon).then(check => {\r\n                                data[i].attachment = check.data.object\r\n                                this.pushHistory(i, data[i])\r\n                            })\r\n                        } else {\r\n                            this.pushHistory(i, data[i])\r\n                        }\r\n                    } else {\r\n                        this.pushHistory(i, data[i])\r\n                    }\r\n\r\n                }\r\n            })\r\n        }).catch(error => {\r\n            console.log(error.response)\r\n        })\r\n    },\r\n\r\n    components: {\r\n        Contact\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .roundedIcon {\r\n        width:30px;\r\n        height:30px;\r\n        border-radius: 50%;\r\n    }\r\n\r\n    .histor:hover {\r\n        background: #e8e7e7;\r\n    }\r\n\r\n    .sidebar {\r\n        overflow-y: scroll;\r\n    }\r\n</style>"]}]}